<!DOCTYPE html>
<!-- saved from url=(0053)http://39.98.190.128/index.html#/pms/updateBrand?id=6 -->
<html class=" ">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mall-admin-web</title>
    <link rel="stylesheet" href="../static/css/basic.min.css"/>
    <link rel="stylesheet" href="../static/css/dropzone.min.css"/>
    <script src="../static/js/js/dropzone.min.js"></script>

    <link href="../static/mall-admin-web_files/app.8adf8f71e2b3e1354ebc85468c2142cc.css" rel="stylesheet">

</head>
<body>


<div id="app">

    <div id="allContext" data-v-0ef526f4="" class="app-wrapper">

        <!--左侧导航栏 begin-->
        <div id="header2"></div>

        <div data-v-0ef526f4="" class="main-container">


            <!--上方导航栏 begin-->
            <ul data-v-453b378a="" data-v-0ef526f4="" role="menubar"
                class="navbar el-menu--horizontal el-menu">
                <!--图标-->
                <div id="topPic" data-v-38e027bb="" data-v-453b378a="" class="hamburger-container"
                     tabindex="0">
                    <svg data-v-38e027bb="" t="1492500959545"
                         viewBox="0 0 1024 1024" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="1691"
                         xmlns:xlink="http://www.w3.org/1999/xlink"
                         width="64" height="64" class="hamburger is-active">
                        <path data-v-38e027bb=""
                              d="M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z"
                              p-id="1692"></path>
                        <path data-v-38e027bb=""
                              d="M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z"
                              p-id="1693"></path>
                        <path data-v-38e027bb=""
                              d="M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z"
                              p-id="1694"></path>
                    </svg>
                </div>
                <!--导航内容-->
                <div data-v-830d14b2="" data-v-453b378a="" aria-label="Breadcrumb" role="navigation"
                     class="el-breadcrumb app-breadcrumb" tabindex="0">
                    <span data-v-830d14b2="">
                        <span data-v-830d14b2="" class="el-breadcrumb__item">
                            <span role="link" class="el-breadcrumb__inner">
                                <a data-v-830d14b2="" href="###############" class="">首页</a>
                            </span>
                            <span role="presentation" class="el-breadcrumb__separator">/</span>
                        </span>
                    <span data-v-830d14b2="" class="el-breadcrumb__item">
                        <span role="link" class="el-breadcrumb__inner">
                            <a data-v-830d14b2="" href="##############"
                               class="router-link-exact-active router-link-active">品牌管理</a></span>
                    <span role="presentation" class="el-breadcrumb__separator">/</span></span>
                    <span data-v-830d14b2="" class="el-breadcrumb__item">
                    <span role="link" class="el-breadcrumb__inner">
                    <span data-v-830d14b2="" class="no-redirect">编辑品牌</span>
                    </span>
                    <span role="presentation"
                          class="el-breadcrumb__separator">/</span></span></span>
                </div>
                <!--用户图标-->
                <div data-v-453b378a="" class="avatar-container el-dropdown" tabindex="0">
                    <div data-v-453b378a="" class="avatar-wrapper el-dropdown-selfdefine"
                         aria-haspopup="list"
                         aria-controls="dropdown-menu-9242" role="button" tabindex="0">
                        <img data-v-453b378a="" src="../static/mall-admin-web_files/timg.jpg"
                             class="user-avatar">
                        <i data-v-453b378a="" class="el-icon-caret-bottom"></i>
                    </div>
                    <ul data-v-453b378a="" class="el-dropdown-menu el-popper user-dropdown"
                        id="dropdown-menu-9242"
                        style="display: none;">
                        <a data-v-453b378a="" href="http://39.98.190.128/index.html#/"
                           class="inlineBlock router-link-active">
                            <li data-v-453b378a="" tabindex="-1" class="el-dropdown-menu__item">
                                首页
                            </li>
                        </a>
                        <li data-v-453b378a="" tabindex="-1"
                            class="el-dropdown-menu__item el-dropdown-menu__item--divided">
                            <span data-v-453b378a="" style="display: block;">退出
                            </span>
                        </li>
                    </ul>
                </div>

            </ul>
            <!--上方导航栏 end-->


            <section data-v-0ef526f4="" class="app-main">
                <div class="el-card form-container is-never-shadow">
                    <div class="el-card__body">
                        <form class="el-form">
                            <div class="el-form-item is-required">
                                <label for="brandName" class="el-form-item__label"
                                       style="width: 150px;">品牌名称：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div class="el-input">
                                        <input type="text" autocomplete="off" class="el-input__inner" id="brandName">
                                    </div>
                                </div>
                            </div>
                            <div class="el-form-item"><label class="el-form-item__label"
                                                             style="width: 150px;">品牌首字母：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div class="el-input"><input type="text" autocomplete="off"
                                                                 class="el-input__inner" id="first_letter">
                                    </div>
                                </div>
                            </div>
                            <div class="el-form-item is-required">
                                <label for="upload" class="el-form-item__label" style="width: 150px;">品牌LOGO：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div>
                                        <div>
                                            <div id="dropz" class="dropzone"></div>
                                            <div tabindex="0" class="el-upload el-upload--picture">
                                                <button type="button"
                                                        class="el-button el-button--primary el-button--small"
                                                        onclick="driverUpload()">
                                                    <span>点击上传</span></button>
                                                <input type="file" name="file" id="upload">
                                            </div>
                                            <input hidden id="picPath" value=""></input>
                                            <div class="el-upload__tip">只能上传jpg/png文件，且不超过10MB</div>
                                            <ul class="el-upload-list el-upload-list--picture">
                                                <li tabindex="0" class="el-upload-list__item is-success">
                                                    <img src="" alt="" class="el-upload-list__item-thumbnail"
                                                         id="brandLogo">
                                                    <a class="el-upload-list__item-name"><i
                                                            class="el-icon-document"></i>1e34aef2a409119018a4c6258e39ecfb_222_222.png
                                                    </a><label class="el-upload-list__item-status-label"><i
                                                        class="el-icon-upload-success el-icon-check"></i></label><i
                                                        class="el-icon-close"></i><i class="el-icon-close-tip">按 delete
                                                    键可删除</i></li>
                                            </ul>
                                        </div>
                                        <div class="el-dialog__wrapper" style="display: none;">
                                            <div class="el-dialog" style="margin-top: 15vh;">
                                                <div class="el-dialog__header"><span class="el-dialog__title"></span>
                                                    <button type="button" aria-label="Close"
                                                            class="el-dialog__headerbtn"><i
                                                            class="el-dialog__close el-icon el-icon-close"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="el-form-item"><label class="el-form-item__label"
                                                             style="width: 150px;">品牌专区大图：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div>
                                        <div>
                                            <div tabindex="0" class="el-upload el-upload--picture">
                                                <button type="button"
                                                        class="el-button el-button--primary el-button--small">
                                                    <span>点击上传</span></button>
                                                <input type="file" name="file" class="el-upload__input"></div>
                                            <div class="el-upload__tip">只能上传jpg/png文件，且不超过10MB</div>
                                            <ul class="el-upload-list el-upload-list--picture">
                                                <li tabindex="0" class="el-upload-list__item is-success"><img
                                                        src="" alt="" id="brandBigPic"
                                                        class="el-upload-list__item-thumbnail"><a
                                                        class="el-upload-list__item-name"><i
                                                        class="el-icon-document"></i>5afd7778Nf7800b75.jpg
                                                </a><label class="el-upload-list__item-status-label"><i
                                                        class="el-icon-upload-success el-icon-check"></i></label><i
                                                        class="el-icon-close"></i><i class="el-icon-close-tip">按 delete
                                                    键可删除</i></li>
                                            </ul>
                                        </div>
                                        <div class="el-dialog__wrapper" style="display: none;">
                                            <div class="el-dialog" style="margin-top: 15vh;">
                                                <div class="el-dialog__header"><span class="el-dialog__title"></span>
                                                    <button type="button" aria-label="Close"
                                                            class="el-dialog__headerbtn"><i
                                                            class="el-dialog__close el-icon el-icon-close"></i></button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="el-form-item"><label class="el-form-item__label"
                                                             style="width: 150px;">品牌故事：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div class="el-textarea"><textarea placeholder="请输入内容" class="el-textarea__inner"
                                                                       style="min-height: 33px; height: 33px;"
                                                                       id="brandStory"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="el-form-item is-success">
                                <label for="brandSort" class="el-form-item__label"
                                       style="width: 150px;">排序：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div class="el-input"><input type="text" autocomplete="off" class="el-input__inner"
                                                                 id="brandSort">
                                    </div>
                                </div>
                            </div>
                            <div class="el-form-item"><label class="el-form-item__label"
                                                             style="width: 150px;">是否显示：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div role="radiogroup" class="el-radio-group"><label role="radio" tabindex="0"
                                                                                         class="el-radio is-checked"
                                                                                         aria-checked="true"><span
                                            class="el-radio__input is-checked"><span
                                            class="el-radio__inner"></span><input type="radio" aria-hidden="true"
                                                                                  tabindex="-1"
                                                                                  class="el-radio__original" value="1"></span><span
                                            class="el-radio__label">是</span></label> <label role="radio"
                                                                                            tabindex="-1"
                                                                                            class="el-radio"><span
                                            class="el-radio__input"><span class="el-radio__inner"></span><input
                                            type="radio" aria-hidden="true" tabindex="-1" class="el-radio__original"
                                            value="0"></span><span class="el-radio__label">否</span></label></div>
                                </div>
                            </div>
                            <div class="el-form-item"><label class="el-form-item__label"
                                                             style="width: 150px;">品牌制造商：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div role="radiogroup" class="el-radio-group"><label role="radio" tabindex="0"
                                                                                         class="el-radio is-checked"
                                                                                         aria-checked="true"><span
                                            class="el-radio__input is-checked"><span
                                            class="el-radio__inner"></span><input type="radio" aria-hidden="true"
                                                                                  tabindex="-1"
                                                                                  class="el-radio__original" value="1"></span><span
                                            class="el-radio__label">是</span></label> <label role="radio"
                                                                                            tabindex="-1"
                                                                                            class="el-radio"><span
                                            class="el-radio__input"><span class="el-radio__inner"></span><input
                                            type="radio" aria-hidden="true" tabindex="-1" class="el-radio__original"
                                            value="0"></span><span class="el-radio__label">否</span></label></div>
                                </div>
                            </div>
                            <div class="el-form-item">
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <button type="button" class="el-button el-button--primary" onclick="subForm()">

                                        <span>提交</span></button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>

<script src="../static/jquery/jquery-2.1.1.min.js"></script>
<script type="text/javascript">


    $("#header2").load("header2.html");

    var left_status = 1;    //左边导航栏的当前状态
    //网页动态脚本
    $("#topPic").click(function () {
        //设置隐藏
        if (left_status) {
            $("#topPic svg").attr("class", "hamburger is-active");
            $("#allContext").attr("class", "app-wrapper hideSidebar withoutAnimation");
            $("#pruduct_ul").hide();
            $("#order_ul").hide();
            $("#sms_ul").hide();

            left_status = 0;
        }
        //设置显示
        else {
            $("#topPic svg").attr("class", "hamburger is-active");
            $("#allContext").attr("class", "app-wrapper withoutAnimation");
            $("#order_ul").show();

            left_status = 1;
        }
    });

    var u_1 = 0;    //当前状态
    $("#product_li").click(function () {
        if (u_1) {
            $("#pruduct_ul").hide();
            u_1 = 0;
        } else {
            $("#pruduct_ul").show();
            u_1 = 1;
        }
    });
    var u_2 = 1;    //当前状态
    $("#order_li").click(function () {
        if (u_2) {
            $("#order_ul").hide();
            u_2 = 0;
        } else {
            $("#order_ul").show();
            u_2 = 1;
        }
    });
    var u_3 = 0;    //当前状态
    $("#sms_li").click(function () {
        if (u_3) {
            $("#sms_ul").hide();
            u_3 = 0;
        } else {
            $("#sms_ul").show();
            u_3 = 1;
        }
    });

    // 隐藏：hamburger
    // app-wrapper hideSidebar withoutAnimation
    // 显示：hamburger is-active


    //根据要修改的品牌id 获取其所有属性
    var brandid;
    //获取传过来的品牌id
    (function getId() {
        brandid = window.location.search.split("=")[1];
        // alert(brandid)
    })();


    //根据id获取品牌所有信息
    (function getById() {
        $.ajax(
            {
                type: "post",
                url: "/findBrandById?id=" + brandid,
                contentType: "application/json",
                dataType: "json",
                success: function (data) {
                    console.log(data);

                    // alert(data.name)
                    $("#brandName").val(data.name);
                    $("#first_letter").val(data.first_letter);
                    brandLogo.src = data.logo;
                    brandBigPic.src = data.big_pic;
                    $("#brandStory").val(data.brand_story);

                },
                error: function (data) {
                    console.log(data)
                }
            }
        )

    })();

    /*function editLogo(){
        $
    }*/

    //点击上传图片事件
    function driverUpload() {
        $("#upload").click();
    }

    /* $('#upload').change(function(){
         var upload = $('#upload').val();
         var brandLogo = document.getElementById("brandLogo");
         var path = getPath(upload);
         alert(path)
         brandLogo.src = path;


     });*/


    $("#upload").on("change", function () {

        // var filepath=getPath(document.getElementById("brandLogo"));
        // alert(getPath(document.getElementById("upload")))
        /* var $file = $(this);
         var fileObj = $file[0];
 
         var windowURL = window.URL || window.webkitURL;
         var dataURL;
         var $img = $("#brandLogo");
 
         dataURL = windowURL.createObjectURL(fileObj.files[0]);
         alert(dataURL)
         console.log(dataURL);
         $img.attr('src', dataURL);*/

        // Dropzone.autoDiscover = false;


    });

    Dropzone.options.dropz = {
        url: "/upload", // 文件提交地址
        method: "POST",  // 也可用put
        paramName: "dropzFile", // 默认为file
        maxFiles: 1,// 一次性上传的文件数量上限
        maxFilesize: 2, // 文件大小，单位：MB
        acceptedFiles: ".jpg,.gif,.png,.jpeg,.txt,.doc,.docx", // 上传的类型
        addRemoveLinks: true,
        parallelUploads: 1,// 一次上传的文件数量
        //previewsContainer:"#preview", // 上传图片的预览窗口
        dictDefaultMessage: '拖动文件至此或者点击上传',
        dictMaxFilesExceeded: "您最多只能上传1个文件！",
        dictResponseError: '文件上传失败!',
        dictInvalidFileType: "文件类型只能是*.jpg,*.gif,*.png,*.jpeg,.txt,.doc,.docx。",
        dictFallbackMessage: "浏览器不受支持",
        dictFileTooBig: "文件过大上传文件最大支持.",
        dictRemoveLinks: "删除",
        dictCancelUpload: "取消",
        init: function () {
            this.on("addedfile", function (file) {
                // 上传文件时触发的事件
            });
            this.on("success", function (file, data) {
                // 上传成功触发的事件
                $("#picPath").val(data.fileName);
                alert($("#picPath").val());
                // alert(data.fileName)
                console.log(data);

            });
            this.on("error", function (file, data) {
                // 上传失败触发的事件
            });
            this.on("removedfile", function (file) {
                // 删除文件时触发的方法
            });
        }
    };


    /* function getPath(obj) {
         if (obj) {
             if (window.navigator.userAgent.indexOf("MSIE") >= 1) {
                 obj.select();
                 return document.selection.createRange().text;
             }
             else if (window.navigator.userAgent.indexOf("Firefox") >= 1) {
                 if (obj.files) {
                     return obj.files.item(0).getAsDataURL();
                 }
                 return obj.src;
             }
             return obj.src;
         }
     }*/


    //提交修改的表单
    function subForm() {
        $.ajax(
            {
                type: "post",
                url: "/updateBrand",
                contentType: "application/json",
                dataType: "json",
                data: JSON.stringify({
                    "id": brandid,
                    "name": $("#brandName").val(),
                    "first_letter": $("first_letter").val(),
                    "logo": $("#picPath").val(),
                    "brand_story": $("#brandStory").val(),
                }),
                success: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            }
        )
    }
</script>

</body>
</html>