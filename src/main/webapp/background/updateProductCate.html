<!DOCTYPE html>
<!-- saved from url=(0059)http://39.98.190.128/index.html#/pms/updateProductCate?id=1 -->
<html class=" ">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mall-admin-web</title>
    <link href="../static/mall-admin-web_files/app.8adf8f71e2b3e1354ebc85468c2142cc.css" rel="stylesheet">

</head>
<body style="">

<script src="./updateProductCate_files/tinymce.min.js.下载"></script>
<div id="app">
    <div data-v-0ef526f4="" class="app-wrapper">
        <div id="header2"></div>
        <div data-v-0ef526f4="" class="main-container">
            <ul data-v-453b378a="" data-v-0ef526f4="" role="menubar" class="navbar el-menu--horizontal el-menu">
                <div data-v-38e027bb="" data-v-453b378a="" class="hamburger-container" tabindex="0">
                    <svg data-v-38e027bb="" t="1492500959545" viewBox="0 0 1024 1024" version="1.1"
                         xmlns="http://www.w3.org/2000/svg" p-id="1691" xmlns:xlink="http://www.w3.org/1999/xlink"
                         width="64" height="64" class="hamburger is-active">
                        <path data-v-38e027bb=""
                              d="M966.8023 568.849776 57.196677 568.849776c-31.397081 0-56.850799-25.452695-56.850799-56.850799l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 543.397081 998.200404 568.849776 966.8023 568.849776z"
                              p-id="1692"></path>
                        <path data-v-38e027bb=""
                              d="M966.8023 881.527125 57.196677 881.527125c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.849776 56.850799-56.849776l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.849776l0 0C1023.653099 856.07443 998.200404 881.527125 966.8023 881.527125z"
                              p-id="1693"></path>
                        <path data-v-38e027bb=""
                              d="M966.8023 256.17345 57.196677 256.17345c-31.397081 0-56.850799-25.452695-56.850799-56.849776l0 0c0-31.397081 25.452695-56.850799 56.850799-56.850799l909.605623 0c31.397081 0 56.849776 25.452695 56.849776 56.850799l0 0C1023.653099 230.720755 998.200404 256.17345 966.8023 256.17345z"
                              p-id="1694"></path>
                    </svg>
                </div>
                <div data-v-830d14b2="" data-v-453b378a="" aria-label="Breadcrumb" role="navigation"
                     class="el-breadcrumb app-breadcrumb" tabindex="0"><span data-v-830d14b2=""><span data-v-830d14b2=""
                                                                                                      class="el-breadcrumb__item"><span
                        role="link" class="el-breadcrumb__inner"><a data-v-830d14b2=""
                                                                    href="http://39.98.190.128/index.html#/home"
                                                                    class="">首页</a></span><span role="presentation"
                                                                                                class="el-breadcrumb__separator">/</span></span><span
                        data-v-830d14b2="" class="el-breadcrumb__item"><span role="link" class="el-breadcrumb__inner"><a
                        data-v-830d14b2="" href="http://39.98.190.128/index.html#/pms/product"
                        class="">商品</a></span><span role="presentation" class="el-breadcrumb__separator">/</span></span><span
                        data-v-830d14b2="" class="el-breadcrumb__item"><span role="link"
                                                                             class="el-breadcrumb__inner"><span
                        data-v-830d14b2="" class="no-redirect">修改商品分类</span></span><span role="presentation"
                                                                                         class="el-breadcrumb__separator">/</span></span></span>
                </div>
                <div data-v-453b378a="" class="avatar-container el-dropdown" tabindex="0">
                    <div data-v-453b378a="" class="avatar-wrapper el-dropdown-selfdefine" aria-haspopup="list"
                         aria-controls="dropdown-menu-8655" role="button" tabindex="0"><img data-v-453b378a=""
                                                                                            src="./updateProductCate_files/timg.jpg"
                                                                                            class="user-avatar"> <i
                            data-v-453b378a="" class="el-icon-caret-bottom"></i></div>
                    <ul data-v-453b378a="" class="el-dropdown-menu el-popper user-dropdown" id="dropdown-menu-8655"
                        style="display: none;"><a data-v-453b378a="" href="http://39.98.190.128/index.html#/"
                                                  class="inlineBlock router-link-active">
                        <li data-v-453b378a="" tabindex="-1" class="el-dropdown-menu__item">
                            首页
                        </li>
                    </a>
                        <li data-v-453b378a="" tabindex="-1"
                            class="el-dropdown-menu__item el-dropdown-menu__item--divided"><span data-v-453b378a=""
                                                                                                 style="display: block;">退出</span>
                        </li>
                    </ul>
                </div>
            </ul>
            <section data-v-0ef526f4="" class="app-main">
                <div data-v-6a32fc9b="" class="el-card form-container is-never-shadow"><!---->
                    <div class="el-card__body">
                        <form data-v-6a32fc9b="" class="el-form">
                            <input hidden id="CategoryId">
                            <div data-v-6a32fc9b="" class="el-form-item is-required"><label for="name"
                                                                                            class="el-form-item__label"
                                                                                            style="width: 150px;">分类名称：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" class="el-input"><!----><input type="text"
                                                                                           autocomplete="off"
                                                                                           class="el-input__inner" id="name">
                                        <!----><!----><!----></div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">上级分类：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" class="el-select"><!---->
                                        <div class="el-input el-input--suffix"><!----><input type="text"
                                                                                             autocomplete="off"
                                                                                             placeholder="请选择分类"
                                                                                             readonly="readonly"
                                                                                             class="el-input__inner"
                                                                                             onclick="showParentType('parentType')" id="parent_id">
                                            <!----><span class="el-input__suffix"><span
                                                    class="el-input__suffix-inner"><i
                                                    class="el-select__caret el-input__icon el-icon-arrow-up"></i><!----></span>
                                                <!----></span><!----></div>
                                        <div class="el-select-dropdown el-popper"
                                             style="display: none; min-width: 221.4px;" id="parentType">
                                            <div class="el-scrollbar" style="">
                                                <div class="el-select-dropdown__wrap el-scrollbar__wrap"
                                                     style="margin-bottom: -17px; margin-right: -17px;">
                                                    <ul class="el-scrollbar__view el-select-dropdown__list" id="typeLevel"><!---->
                                                        <li data-v-6a32fc9b=""
                                                            class="el-select-dropdown__item selected"><span>无上级分类</span>
                                                        </li>
                                                        <!--<li data-v-6a32fc9b="" class="el-select-dropdown__item">
                                                            <span>服装</span></li>
                                                        <li data-v-6a32fc9b="" class="el-select-dropdown__item"><span>手机数码</span>
                                                        </li>
                                                        <li data-v-6a32fc9b="" class="el-select-dropdown__item"><span>家用电器</span>
                                                        </li>
                                                        <li data-v-6a32fc9b="" class="el-select-dropdown__item"><span>家具家装</span>
                                                        </li>
                                                        <li data-v-6a32fc9b="" class="el-select-dropdown__item"><span>汽车用品</span>
                                                        </li>-->
                                                    </ul>
                                                </div>
                                                <div class="el-scrollbar__bar is-horizontal">
                                                    <div class="el-scrollbar__thumb"
                                                         style="transform: translateX(0%);"></div>
                                                </div>
                                                <div class="el-scrollbar__bar is-vertical">
                                                    <div class="el-scrollbar__thumb"
                                                         style="transform: translateY(0%);"></div>
                                                </div>
                                            </div><!----></div>
                                    </div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">数量单位：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" class="el-input"><!----><input type="text"
                                                                                           autocomplete="off"
                                                                                           class="el-input__inner" id="product_unit">
                                        <!----><!----><!----></div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">排序：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" class="el-input"><!----><input type="text"
                                                                                           autocomplete="off"
                                                                                           class="el-input__inner" id="sort">
                                        <!----><!----><!----></div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">是否显示：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" role="radiogroup" class="el-radio-group"><label
                                            data-v-6a32fc9b="" role="radio" tabindex="0" class="el-radio is-checked"
                                            aria-checked="true"><span class="el-radio__input is-checked"><span
                                            class="el-radio__inner"></span><input type="radio" aria-hidden="true"
                                                                                  tabindex="-1"
                                                                                  class="el-radio__original" value="1"></span><span
                                            class="el-radio__label">是<!----></span></label> <label data-v-6a32fc9b=""
                                                                                                   role="radio"
                                                                                                   tabindex="-1"
                                                                                                   class="el-radio"><span
                                            class="el-radio__input"><span class="el-radio__inner"></span><input
                                            type="radio" aria-hidden="true" tabindex="-1" class="el-radio__original"
                                            value="0"></span><span class="el-radio__label">否<!----></span></label></div>
                                    <!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">是否显示在导航栏：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" role="radiogroup" class="el-radio-group"><label
                                            data-v-6a32fc9b="" role="radio" tabindex="0" class="el-radio is-checked"
                                            aria-checked="true"><span class="el-radio__input is-checked"><span
                                            class="el-radio__inner"></span><input type="radio" aria-hidden="true"
                                                                                  tabindex="-1"
                                                                                  class="el-radio__original" value="1"></span><span
                                            class="el-radio__label">是<!----></span></label> <label data-v-6a32fc9b=""
                                                                                                   role="radio"
                                                                                                   tabindex="-1"
                                                                                                   class="el-radio"><span
                                            class="el-radio__input"><span class="el-radio__inner"></span><input
                                            type="radio" aria-hidden="true" tabindex="-1" class="el-radio__original"
                                            value="0"></span><span class="el-radio__label">否<!----></span></label></div>
                                    <!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">分类图标：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="">
                                        <div>
                                            <div tabindex="0" class="el-upload el-upload--picture">
                                                <button type="button"
                                                        class="el-button el-button--primary el-button--small"><!---->
                                                    <!----><span>点击上传</span></button>
                                                <input type="file" name="file" class="el-upload__input"></div>
                                            <div class="el-upload__tip">只能上传jpg/png文件，且不超过10MB</div>
                                        </div>
                                        <div class="el-dialog__wrapper" style="display: none;">
                                            <div class="el-dialog" style="margin-top: 15vh;">
                                                <div class="el-dialog__header"><span class="el-dialog__title"></span>
                                                    <button type="button" aria-label="Close"
                                                            class="el-dialog__headerbtn"><i
                                                            class="el-dialog__close el-icon el-icon-close"></i></button>
                                                </div><!----><!----></div>
                                        </div>
                                    </div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">筛选属性：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;"><span data-v-6a32fc9b=""
                                                                                                     class="el-cascader"><div
                                        class="el-input el-input--suffix"><!----><input type="text" autocomplete="off"
                                                                                        readonly="readonly"
                                                                                        placeholder="请选择"
                                                                                        class="el-input__inner"
                                                                                        value=""><!----><span
                                        class="el-input__suffix"><span class="el-input__suffix-inner"><i
                                        class="el-input__icon el-icon-arrow-down"></i><!----></span><!----></span>
                                    <!----></div><span class="el-cascader__label"></span></span>
                                    <button data-v-6a32fc9b="" type="button" class="el-button el-button--default"
                                            style="margin-left: 20px;"><!----><!----><span>删除</span></button><!---->
                                </div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><!---->
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <button data-v-6a32fc9b="" type="button"
                                            class="el-button el-button--primary el-button--small"><!---->
                                        <!----><span>新增</span></button><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">关键词：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" class="el-input"><!----><input type="text"
                                                                                           autocomplete="off"
                                                                                           class="el-input__inner" id="keywords">
                                        <!----><!----><!----></div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><label class="el-form-item__label"
                                                                                style="width: 150px;">分类描述：</label>
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <div data-v-6a32fc9b="" class="el-textarea"><textarea class="el-textarea__inner"
                                                                                          style="min-height: 33px; height: 33px;" id="description"></textarea>
                                    </div><!----></div>
                            </div>
                            <div data-v-6a32fc9b="" class="el-form-item"><!---->
                                <div class="el-form-item__content" style="margin-left: 150px;">
                                    <button data-v-6a32fc9b="" type="button" class="el-button el-button--primary" onclick="subModifyForm()">
                                        <!----><!----><span>提交</span></button> <!----><!----></div>
                            </div>
                        </form>
                    </div>
                </div>
            </section>
        </div>
    </div>
</div>
<!--<script type="text/javascript" src="./updateProductCate_files/manifest.6ed17977cd281dde32f6.js.下载"></script>
<script type="text/javascript" src="./updateProductCate_files/vendor.48a1ef0705a71cc87472.js.下载"></script>
<script type="text/javascript" src="./updateProductCate_files/app.85ae43be5ac0839f3d77.js.下载"></script>-->

<script src="../static/jquery/jquery-2.1.1.min.js"></script>
<script>

    $("#header2").load("header.html");


    //根据要修改的分类id 获取其所有属性
    var Categoryid;
    //获取传过来的分类id
    (function getId() {
        Categoryid =window.location.search.split("=")[1];
        // alert(brandid)
    })();

    //根据id获取分类信息
    (function getById(){
        $.ajax(
            {
                type: "post",
                url: "/lookProductCategoryById?id="+Categoryid,
                contentType: "application/json",
                dataType: "json",
                success: function (data) {
                    console.log(data);
                    $("#name").val(data.name);
                    $("#parent_id").val(data.parent_id);
                    $("#product_unit").val(data.product_unit);
                    $("#sort").val(data.sort);
                    $("#keywords").val(data.keywords);
                    $("#description").val(data.description);
                    $("#CategoryId").val(data.id)

                },
                error: function (data) {
                    console.log(data)
                }
            }
        )

    })();

    //获取父级类型
    (function showProductBrand() {
        var typeLevel = $("#typeLevel");
        $.ajax(
            {
                type: "get",
                url: "/listParentProductCategory",
                contentType: "application/json",
                dataType: "json",
                success: function (data) {
                    var str = '';
                    $(data).each(function (index, item) {
                        str += "<li data-v-6a32fc9b=\"\" class=\"el-select-dropdown__item\" onclick='setParentId("+item.id+")'><span>" + item.name + "</span></li>"
                    })
                    typeLevel.append(str);

                },
                error: function (data) {
                    console.log(data)
                }

            })
    })();

    //展示父级类型
    function showParentType(item) {
        if (document.getElementById(item).style.display == "none") {
            document.getElementById(item).style.display = "block"
        } else {
            document.getElementById(item).style.display = "none"
        }
    }

    //点击设置父级类型
    function setParentId(id) {
        $("#parent_id").val(id);
        showParentType("parentType");

    }

    //提交添加类型表单
    function subModifyForm() {
        var id = $("#CategoryId").val();
        var name = $("#name").val();
        var parent_id = $("#parent_id").val();
        var product_unit = $("#product_unit").val();
        var sort = $("#sort").val();
        var keywords = $("#keywords").val();
        var description = $("#description").val();

        $.ajax(
            {
                type: "post",
                url: "/modifyProductCategoryById",
                contentType: "application/json",
                dataType: "json",
                data:JSON.stringify({
                    "id":id,
                    "name":name,
                    "parent_id":parent_id,
                    "product_unit":product_unit,
                    "sort":sort,
                    "keywords":keywords,
                    "description":description
                }),
                success:function (data) {
                    console.log(data);
                    window.location.url ="productCate.html";
                },
                error:function (data) {
                    console.log(data);
                }
            }
        )

    }




</script>

</body>
</html>