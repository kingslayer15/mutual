<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
        <meta name="author" content="order by dede58.com"/>
		<title>商品详情</title>
		<link rel="stylesheet" type="text/css" href="../static/css/style.css">
	</head>
	<body>



	<!-- start header -->
		<!--<header>-->
			<!--<div class="top center">-->
				<!--<div class="left fl">-->
					<!--<ul>-->
						<!--<li><a href="http://www.mi.com/" target="_blank">小米商城</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">MIUI</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">米聊</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">游戏</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">多看阅读</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">云服务</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">金融</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">小米商城移动版</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">问题反馈</a></li>-->
						<!--<li>|</li>-->
						<!--<li><a href="">Select Region</a></li>-->
						<!--<div class="clear"></div>-->
					<!--</ul>-->
				<!--</div>-->
				<!--<div class="right fr">-->
					<!--<div class="gouwuche fr"><a href="/main/gouwuche.html">购物车</a></div>-->
					<!--<div class="fr">-->
						<!--<ul>-->
							<!--<li><a href="./login.html" target="_blank">登录</a></li>-->
							<!--<li>|</li>-->
							<!--<li><a href="./register.html" target="_blank" >注册</a></li>-->
							<!--<li>|</li>-->
							<!--<li><a href="">消息通知</a></li>-->
						<!--</ul>-->
					<!--</div>-->
					<!--<div class="clear"></div>-->
				<!--</div>-->
				<!--<div class="clear"></div>-->
			<!--</div>-->
		<!--</header>-->
	<!--end header -->

<!-- start banner_x -->
		<!--<div class="banner_x center">-->
			<!--<a href="./index.html" target="_blank"><div class="logo fl"></div></a>-->
			<!--<a href=""><div class="ad_top fl"></div></a>-->
			<!--<div class="nav fl">-->
				<!--<ul>-->
					<!--<li><a href="">小米手机</a></li>-->
					<!--<li><a href="">红米</a></li>-->
					<!--<li><a href="">平板·笔记本</a></li>-->
					<!--<li><a href="">电视</a></li>-->
					<!--<li><a href="">盒子·影音</a></li>-->
					<!--<li><a href="">路由器</a></li>-->
					<!--<li><a href="">智能硬件</a></li>-->
					<!--<li><a href="">服务</a></li>-->
					<!--<li><a href="">社区</a></li>-->
				<!--</ul>-->
			<!--</div>-->
			<!--<div class="search fr">-->
				<!--<form action="" method="post">-->
					<!--<div class="text fl">-->
						<!--<input type="text" class="shuru"  placeholder="小米6&nbsp;小米MIX现货">-->
					<!--</div>-->
					<!--<div class="submit fl">-->
						<!--<input type="submit" class="sousuo" value="搜索"/>-->
					<!--</div>-->
					<!--<div class="clear"></div>-->
				<!--</form>-->
				<!--<div class="clear"></div>-->
			<!--</div>-->
		<!--</div>-->
<!-- end banner_x -->


    <!--TODO-->
	<!-- xiangqing -->
	<!--<form action="post" method="">-->
	<!--<div class="xiangqing">-->
		<!--<div class="neirong w">-->
			<!--<div class="xiaomi6 fl">小米6</div>-->
			<!--<nav class="fr">-->
				<!--<li><a href="">概述</a></li>-->
				<!--<li>|</li>-->
				<!--<li><a href="">变焦双摄</a></li>-->
				<!--<li>|</li>-->
				<!--<li><a href="">设计</a></li>-->
				<!--<li>|</li>-->
				<!--<li><a href="">参数</a></li>-->
				<!--<li>|</li>-->
				<!--<li><a href="">F码通道</a></li>-->
				<!--<li>|</li>-->
				<!--<li><a href="">用户评价</a></li>-->
				<!--<div class="clear"></div>-->
			<!--</nav>-->
			<!--<div class="clear"></div>-->
		<!--</div>	-->
	<!--</div>-->
    <div id="header"></div>

	<div class="jieshao mt20 w" id="appenddiv"><!--
		<div class="left fl"><img src="../static/image/liebiao_xiaomi6.jpg"></div>
		<div class="right fr">
			<div class="h3 ml20 mt20">小米6</div>
			<div class="jianjie mr40 ml20 mt10">变焦双摄，4 轴防抖 / 骁龙835 旗舰处理器，6GB 大内存，最大可选128GB 闪存 / 5.15" 护眼屏 / 四曲面玻璃/陶瓷机身</div>
			<div class="jiage ml20 mt10">2499.00元</div>
			<div class="ft20 ml20 mt20" >选择版本</div>
			<div class="xzbb ml20 mt10" id="version" >
				<div class="banben fl">
					<a>
						<span>全网通版 6GB+64GB </span>
						<span>2499元</span>
					</a>
				</div>
				<div class="banben fr">
					<a>
						<span>全网通版 6GB+128GB</span>
						<span>2899元</span>
					</a>
				</div>
				<div class="clear"></div>
			</div>
			<div class="ft20 ml20 mt20">选择颜色</div>
			<div class="xzbb ml20 mt10">
				<div class="banben fl">
					<a>
						<span class="yuandian" ></span>
						<span class="yanse">亮黑色</span>
					</a>
				</div>
				<div class="banben fr">
					<a>
						<span class="yuandian"></span>
						<span class="yanse">蓝色</span>
					</a>
				</div>
				<div class="clear"></div>

			</div>

			<div class="xqxq mt20 ml20">
				<div class="top1 mt10">
					<div class="left1 fl">小米6 全网通版 6GB内存 64GB 亮黑色</div>
					<div class="right1 fr">2499.00元</div>
					<div class="clear"></div>
				</div>
				<div class="bot mt20 ft20 ftbc">总计：2499元</div>
			</div>
			<div class="xiadan ml20 mt20">
					<input class="jrgwc"  type="button" name="jrgwc" value="立即选购" />
					<input class="jrgwc" type="button" name="jrgwc" value="加入购物车" />

			</div>
		</div>
		<div class="clear"></div>
	--></div>
	</form>
	<!-- footer -->
	<footer class="mt20 center">

        <!--TODO 盒子-->
            <div>     </div>
			<!--<div class="mt20">小米商城|MIUI|米聊|多看书城|小米路由器|视频电话|小米天猫店|小米淘宝直营店|小米网盟|小米移动|隐私政策|Select Region</div>-->
			<div>©mutual.com 京ICP证110507号 京ICP备10046444号 京公网安备11010802020134号 京网文[2014]0059-0009号</div>
			<div>违法和不良信息举报电话：185-0130-1238，本网站所列数据，除特殊说明，所有数据均出自我司实验室测试</div>

		</footer>


	<script type="text/javascript" src="../static/js/js/jquery-3.2.1.js"></script>
    <script>

            $("#header").load("header.html")


    </script>
    <script>
        var id=window.location.search.split("=")[1]
        var memberId;
        $(function () {

            $.ajax({
                type: "get",
                url: "/saveCookies?id=" + id,
                contentType: "application/json",
                success: function (data) {
                    console.log(data); //  2pm

                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });
            $.ajax({
                type: "get",
                url: "/getMemberId",
                contentType: "application/json",
                success: function (data) {
                    console.log(data); //  2pm
					memberId = data;

                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });
        })
        // function r1() {
        //     $("#r1").attr("style", "background:red");
        // }

        // var memberNickname;
        // var createDate;
        var productId=id;
        var quantity=1
        var deleteStatus = 0;
        var productName;
        var productSubTitle;
        var productCategoryId;
        function a() {
            $.ajax({
                async:false,
                type: "get",
                url: "/getProductDetailsById?id=" + id,
                contentType: "application/json",
                success: function (data) {
                    var appenddiv = $("#appenddiv");
                    var innerHtml = "";
                    $(data).each(function (index, item) {
                        productName = item.name
                        productSubTitle =item.subTitle
                        productCategoryId = item.productCategoryId

                        innerHtml += "\t\t<div style='text-align: center;vertical-align:middle' class=\"left fl\"><img style='height: 80%;width: 80%;' src=\"" + item.pic + "\"></div>\n" +
                            "\t\t<div class=\"right fr\">\n" +
                            "\t\t\t<div class=\"h3 ml20 mt20\">" + item.name + "</div>\n" +
                            "\t\t\t<div class=\"jianjie mr40 ml20 mt10\">" + item.subTitle + "</div>\n" +
                            "\t\t\t<div class=\"jiage ml20 mt10\">" + item.price + "元</div>\n" +
                            "\t\t\t<div class=\"jiage ml20 mt10\"'>选择版本</div>\n"+
                            "\t\t\t<div class=\"xzbb ml20 mt10\" id=\"version\" >"
                    });

                    appenddiv.empty();
                    appenddiv.append(innerHtml);
                    console.log(data); //  2pm
                    console.log(innerHtml); //  2pm

                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });
        }
        a()
        var versionindexsum;
        function b() {
            $.ajax({
                type: "get",
                url: "/getVersion?productId=" + id,
                contentType: "application/json",
                success: function (data) {
                    var appenddiv = $("#version");
                    var innerHtml ="";
                    $(data).each(function (index, item) {
                        versionindexsum=index;
                        innerHtml +="\n" +
                            "\t\t\t\t<div  class=\"banben fl\">\n" +
                            "\t\t\t\t\t<a id='"+index+"' onclick=\"c('"+item.sp2+"','"+item.price+"','"+index+"')\">\n" +
                            "\t\t\t\t\t\t<span>"+item.sp2+"</span>\n" +
                            "\t\t\t\t\t\t<span>"+item.price+"元</span>\n" +
                            "\t\t\t\t\t</a>\n" +
                            "\t\t\t\t</div>\n" ;
                    });
                    innerHtml+="\t\t\t\t<div id='color' class=\"clear\"></div>\n" ;
                    appenddiv.empty();
                    appenddiv.append(innerHtml);
                    console.log(data); //  2pm
                    console.log(innerHtml); //  2pm

                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });
        }

        b();
        var colorindexsum;
        function c(sp2,price,index) {
            for (var i = 0; i <= versionindexsum; i++) {
                if (index == i) {

                    $("#"+i).attr("style","background:rgb(217,217,217)");
                } else {

                    $("#"+i).attr("style","background:rgb(248,248,248)");
                }
            }


            $.ajax({
                type: "post",
                url: "/getColorByRom",
                contentType: "application/json",
                data: JSON.stringify({
                    "sp2":sp2,
                    "price":price
                }),
                success: function (data) {
                    var appenddiv = $("#color");
                    var innerHtml ="\t\t\t</div>\n" +
                        "\t\t\t<div class=\"jiage ml20 mt10\">选择颜色</div>\n" +
                        "\t\t\t<div class=\"xzbb ml20 mt10\">\n";
                    $(data).each(function (index, item) {
                        colorindexsum = index;

                        innerHtml +="\n" +
                            "\t\t\t\t<div class=\"banben fl\">\n" +
                            "\t\t\t\t\t<a id='color"+index+"' onclick=\"d('"+item.id+"','"+index+"')\">\n" +
                            "\t\t\t\t\t\t<span class=\"yuandian\" ></span>\n" +
                            "\t\t\t\t\t\t<span class=\"yanse\">"+item.sp1+"</span>\n" +
                            "\t\t\t\t\t</a>\n" +
                            "\t\t\t\t</div>\n" ;
                    });
                    innerHtml+="\n" +
                        "\t\t\t\t<div class=\"clear\"></div>\n" +
                        "\n" +
                        "\t\t\t</div>\n" +
                        "\n" +
                        "\t\t\t<div  id='sum'>\n";
                    appenddiv.empty();
                    appenddiv.append(innerHtml);
                    console.log(data); //  2pm
                    console.log(innerHtml); //  2pm

                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });
        }
        var productSkuId;
        var price;
        var sp1;
        var sp2;
        function d(id,index) {

            // $('#color'+index).attr("style","background:gray")
            for (var i = 0; i <= colorindexsum; i++) {
                if (index == i) {
                    $("#color" + i).attr("style", "background:rgb(217,217,217)");
                } else {
                    $("#color"+i).attr("style","background:rgb(248,248,248)");
                }
            }

            $.ajax({
                type: "get",
                url: "/getSumById?id=" + id,
                contentType: "application/json",
                success: function (data) {
                    var appenddiv = $("#sum");
                    var innerHtml ="";
                    $(data).each(function (index, item) {
                        productSkuId = item.id
                        price = item.price
                        sp1 = item.sp1
                        sp2 = item.sp2

                        innerHtml +="\n" +
                            "\t\t\t\t<div class=\"top1 mt10\">\n" +
                            "\t\t\t\t\t<div class=\"clear\"></div>\n" +
                            "\t\t\t\t</div>\n" +
                            "\t\t\t\t<div class=\"bot mt20 ft20 ftbc\">总计："+item.price+"元</div>\n" +
                            "\t\t\t" ;
                    });
                    innerHtml+="\n" +
                        "\t\t\t</div>\n" +
                        "\t\t\t<div class=\"xiadan ml20 mt20\">\n" +
                        "\t\t\t\t\t<input id='collection' onclick='collectProduct()' href='' class=\"jrgwc\"  type=\"button\" name=\"jrgwc\" value=\"加入收藏夹\" />\n" +
                        "\t\t\t\t\t<input id='joincart' onclick='cart()' class=\"jrgwc\" type=\"button\" name=\"jrgwc\" value=\"加入购物车\" />\n" +
                        "\t\t\t\t\n" +
                        "\t\t\t</div>\n" +
                        "\t\t</div>\n" +
                        "\t\t<div class=\"clear\"></div>";
                    appenddiv.empty();
                    appenddiv.append(innerHtml);
                    console.log(data); //  2pm
                    console.log(innerHtml); //  2pm

                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });
        }

        var cartid;
        function cart() {
            $.ajax({
                type: "post",
                url: "/selectOneByAll2",
                contentType: "application/json",
                data: JSON.stringify({
                    "productId": productId,
                    "productSkuId": productSkuId,
                    "memberId": memberId,
                    "quantity": quantity,
                    "price": price,
                    "sp1": sp1,
                    "sp2": sp2,
                    "productName": productName,
                    "productSubTitle": productSubTitle,
                    // "createDate": createDate,
                    "deleteStatus": deleteStatus,
                    "productCategoryId": productCategoryId
                }),
                success: function (data) {
                    cartid=data;
                  /*验证用户*/
                    console.log(data); //  2pm
                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });

        }
        function collectProduct() {

            $.ajax({
                type: "post",
                url: "/insertCollection",
                contentType: "application/json",
                data: JSON.stringify({
                    "productId": productId,
                    "memberId": memberId,
                }),
                success: function (data) {
                    if (data == "1") {
                        $("#collection").val("取消收藏");
                    } else {
                        $("#collection").val("加入收藏夹");

                    }
                    console.log(data); //  2pm
                },
                error: function (data) {
                    console.log(data);
                },
                dataType: "json"
            });



        }
	</script>

	</body>
</html>